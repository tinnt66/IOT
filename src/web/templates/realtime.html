{% extends 'base.html' %}

{% block head %}
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
{% endblock %}

{% block content %}
<div class="space-y-6">
    <section class="grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3" aria-label="Realtime Stats">
        <div class="rounded-xl border border-notion-border border-l-4 border-l-emerald-500 bg-white p-4 shadow-sm dark:border-gray-800 dark:bg-gray-900">
            <div class="text-xs font-medium text-notion-muted dark:text-gray-400">Z1 Latest Value</div>
            <div class="mt-2 text-2xl font-semibold tabular-nums" id="adxl1-value">-</div>
            <div class="mt-1 text-xs text-notion-muted dark:text-gray-400">Channel</div>
        </div>

        <div class="rounded-xl border border-notion-border border-l-4 border-l-indigo-500 bg-white p-4 shadow-sm dark:border-gray-800 dark:bg-gray-900">
            <div class="text-xs font-medium text-notion-muted dark:text-gray-400">Z2 Latest Value</div>
            <div class="mt-2 text-2xl font-semibold tabular-nums" id="adxl2-value">-</div>
            <div class="mt-1 text-xs text-notion-muted dark:text-gray-400">Channel</div>
        </div>

        <div class="rounded-xl border border-notion-border border-l-4 border-l-amber-500 bg-white p-4 shadow-sm dark:border-gray-800 dark:bg-gray-900">
            <div class="text-xs font-medium text-notion-muted dark:text-gray-400">Z3 Latest Value</div>
            <div class="mt-2 text-2xl font-semibold tabular-nums" id="adxl3-value">-</div>
            <div class="mt-1 text-xs text-notion-muted dark:text-gray-400">Channel</div>
        </div>
    </section>

    <section class="rounded-xl border border-notion-border bg-white p-5 shadow-sm dark:border-gray-800 dark:bg-gray-900">
        <h2 class="text-sm font-semibold tracking-tight">Latest RS485 Sensor Data</h2>
        <div class="mt-4 grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-4">
            <div class="rounded-xl border border-notion-border bg-notion-bg p-4 dark:border-gray-800 dark:bg-gray-950">
                <div class="text-xs font-medium text-notion-muted dark:text-gray-400">Temperature</div>
                <div class="mt-2 text-3xl font-semibold tabular-nums" id="temp-value">-</div>
                <div class="mt-1 text-xs text-notion-muted dark:text-gray-400">Â°C</div>
            </div>

            <div class="rounded-xl border border-notion-border bg-notion-bg p-4 dark:border-gray-800 dark:bg-gray-950">
                <div class="text-xs font-medium text-notion-muted dark:text-gray-400">Humidity</div>
                <div class="mt-2 text-3xl font-semibold tabular-nums" id="humidity-value">-</div>
                <div class="mt-1 text-xs text-notion-muted dark:text-gray-400">%</div>
            </div>

            <div class="rounded-xl border border-notion-border bg-notion-bg p-4 dark:border-gray-800 dark:bg-gray-950">
                <div class="text-xs font-medium text-notion-muted dark:text-gray-400">Wind Direction</div>
                <div class="mt-2 text-3xl font-semibold tabular-nums" id="wind-dir-value">-</div>
                <div class="mt-1 text-xs text-notion-muted dark:text-gray-400" id="wind-dir-deg">-</div>
            </div>

            <div class="rounded-xl border border-notion-border bg-notion-bg p-4 dark:border-gray-800 dark:bg-gray-950">
                <div class="text-xs font-medium text-notion-muted dark:text-gray-400">Wind Speed</div>
                <div class="mt-2 text-3xl font-semibold tabular-nums" id="wind-speed-value">-</div>
                <div class="mt-1 text-xs text-notion-muted dark:text-gray-400">m/s</div>
            </div>
        </div>
    </section>

    <section class="rounded-xl border border-notion-border bg-white p-5 shadow-sm dark:border-gray-800 dark:bg-gray-900">
        <h2 class="text-sm font-semibold tracking-tight">Latest ADXL Accelerometer Batch</h2>
        <div class="mt-4 grid grid-cols-1 gap-3 sm:grid-cols-3">
            <div class="rounded-xl border border-notion-border bg-notion-bg p-4 dark:border-gray-800 dark:bg-gray-950">
                <div class="text-xs font-medium text-notion-muted dark:text-gray-400">Chunk Start</div>
                <div class="mt-2 text-xl font-semibold tabular-nums" id="adxl-chunk">-</div>
            </div>
            <div class="rounded-xl border border-notion-border bg-notion-bg p-4 dark:border-gray-800 dark:bg-gray-950">
                <div class="text-xs font-medium text-notion-muted dark:text-gray-400">Sample Count</div>
                <div class="mt-2 text-xl font-semibold tabular-nums" id="adxl-samples">-</div>
            </div>
            <div class="rounded-xl border border-notion-border bg-notion-bg p-4 dark:border-gray-800 dark:bg-gray-950">
                <div class="text-xs font-medium text-notion-muted dark:text-gray-400">Frequency</div>
                <div class="mt-2 text-xl font-semibold tabular-nums" id="adxl-freq">-</div>
            </div>
        </div>
    </section>

    <section class="rounded-xl border border-notion-border bg-white p-5 shadow-sm dark:border-gray-800 dark:bg-gray-900">
        <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
            <h2 class="text-sm font-semibold tracking-tight">Charts</h2>
            <button class="inline-flex items-center justify-center rounded-md bg-gray-900 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-900/20"
                id="btn-toggle-vibration" type="button">
                Show Vibration Charts
            </button>
        </div>

        <div class="mt-4 grid grid-cols-1 gap-4 lg:grid-cols-2">
            <div class="rounded-xl border border-notion-border bg-white p-4 dark:border-gray-800 dark:bg-gray-900">
                <div class="text-xs font-medium text-notion-muted dark:text-gray-400">Temperature &amp; Humidity</div>
                <div class="mt-3 h-56">
                    <canvas id="chart-temp-hum"></canvas>
                </div>
            </div>

            <div class="rounded-xl border border-notion-border bg-white p-4 dark:border-gray-800 dark:bg-gray-900">
                <div class="text-xs font-medium text-notion-muted dark:text-gray-400">Wind Speed</div>
                <div class="mt-3 h-56">
                    <canvas id="chart-wind-speed"></canvas>
                </div>
            </div>
        </div>

        <div class="mt-4 hidden grid grid-cols-1 gap-4 lg:grid-cols-3" id="vibration-charts-row">
            <div class="rounded-xl border border-notion-border bg-white p-4 dark:border-gray-800 dark:bg-gray-900">
                <div class="text-xs font-medium text-notion-muted dark:text-gray-400">Z1 Raw</div>
                <div class="mt-3 h-72">
                    <canvas id="chart-z1"></canvas>
                </div>
            </div>
            <div class="rounded-xl border border-notion-border bg-white p-4 dark:border-gray-800 dark:bg-gray-900">
                <div class="text-xs font-medium text-notion-muted dark:text-gray-400">Z2 Raw</div>
                <div class="mt-3 h-72">
                    <canvas id="chart-z2"></canvas>
                </div>
            </div>
            <div class="rounded-xl border border-notion-border bg-white p-4 dark:border-gray-800 dark:bg-gray-900">
                <div class="text-xs font-medium text-notion-muted dark:text-gray-400">Z3 Raw</div>
                <div class="mt-3 h-72">
                    <canvas id="chart-z3"></canvas>
                </div>
            </div>
        </div>
    </section>
</div>
{% endblock %}
